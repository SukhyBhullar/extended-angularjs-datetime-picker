!function(){"use strict";angular.module("angularjs-datetime-picker",[]);var a=function(a){"string"==typeof a&&(a=new Date(a));var b=new Date(a.getFullYear(),0,1),c=new Date(a.getFullYear(),6,1),d=Math.max(b.getTimezoneOffset(),c.getTimezoneOffset()),e=a.getTimezoneOffset()<d,f=e?d-60:d,g=f>=0?"-":"+";return g+("0"+f/60).slice(-2)+":"+("0"+f%60).slice(-2)},b=function(a,b,c){var d=c("DatetimePickerCtrl");return{open:function(a){d.openDatetimePicker(a)},close:function(){d.closeDatetimePicker()}}};b.$inject=["$compile","$document","$controller"],angular.module("angularjs-datetime-picker").factory("DatetimePicker",b);var c=function(a,b){var c,d=this,e=function(a){a&&a.remove(),b[0].body.removeEventListener("click",d.closeDatetimePicker)};this.openDatetimePicker=function(d){this.closeDatetimePicker();var e=angular.element("<div datetime-picker-popup ng-cloak></div>");d.dateFormat&&e.attr("date-format",d.dateFormat),d.ngModel&&e.attr("ng-model",d.ngModel),d.year&&e.attr("year",parseInt(d.year)),d.month&&e.attr("month",parseInt(d.month)),d.day&&e.attr("day",parseInt(d.day)),d.hour&&e.attr("hour",parseInt(d.hour)),d.minute&&e.attr("minute",parseInt(d.minute)),""!==d.dateOnly&&d.dateOnly!==!0||e.attr("date-only","true"),"false"===d.closeOnSelect&&e.attr("close-on-select","false"),d.fieldId&&e.attr("field-id",d.fieldId);var f=d.triggerEl;d.scope=d.scope||angular.element(f).scope(),c=a(e)(d.scope)[0],c.triggerEl=d.triggerEl,b[0].body.appendChild(c);var g=f.getBoundingClientRect();d.scope.$apply();var h=c.getBoundingClientRect();c.style.position="absolute",g.width>h.width?c.style.left=g.left+g.width-h.width+window.scrollX+"px":c.style.left=g.left+window.scrollX+"px",g.top<300||window.innerHeight-g.bottom>300?c.style.top=g.bottom+window.scrollY+"px":c.style.top=g.top-h.height+window.scrollY+"px",b[0].body.addEventListener("click",this.closeDatetimePicker)},this.closeDatetimePicker=function(a){var c=a&&a.target,d=b[0].querySelector("div[datetime-picker-popup]");a&&c?c.hasAttribute("datetime-picker")||d&&d.contains(c)||e(d):e(d)}};c.$inject=["$compile","$document"],angular.module("angularjs-datetime-picker").controller("DatetimePickerCtrl",c);var d=['<div class="angularjs-datetime-picker">','  <div class="adp-month">','    <button type="button" class="adp-prev" ng-click="addMonth(-1)">&laquo;</button>','    <span title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}}</span> {{mv.year}}','    <button type="button" class="adp-next" ng-click="addMonth(1)">&raquo;</button>',"  </div>",'  <div class="adp-days" ng-click="setDate($event)">','    <div class="adp-day-of-week" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}">{{::dayOfWeek.firstLetter}}</div>','    <div class="adp-day" ng-show="mv.leadingDays.length < 7" ng-repeat="day in mv.leadingDays">{{::day}}</div>','    <div class="adp-day selectable" ng-repeat="day in mv.days" ',"      today=\"{{today}}\" d2=\"{{mv.year + '-' + (mv.month + 1) + '-' + day}}\"",'      ng-class="{',"        selected: (day == selectedDay),","        today: (today == (mv.year + '-' + (mv.month + 1) + '-' + day)),","        weekend: (mv.leadingDays.length + day)%7 == 1 || (mv.leadingDays.length + day)%7 == 0",'      }">',"      {{::day}}","    </div>",'    <div class="adp-day" ng-show="mv.trailingDays.length < 7" ng-repeat="day in mv.trailingDays">{{::day}}</div>',"  </div>",'  <div class="adp-days" id="adp-time"> ','    <label class="timeLabel">Time:</label> <span class="timeValue">{{("0"+inputHour).slice(-2)}} : {{("0"+inputMinute).slice(-2)}}</span><br/>','    <label class="hourLabel">Hour:</label> <input class="hourInput" type="range" min="0" max="23" ng-model="inputHour" ng-change="updateNgModel()" />','    <label class="minutesLabel">Min:</label> <input class="minutesInput" type="range" min="0" max="59" ng-model="inputMinute"  ng-change="updateNgModel()"/> ',"  </div> ","</div>"].join("\n"),e=function(b,c){var e,f,g,h,i=function(){e=[],f=[],g=[],h=0;for(var a=1;a<=31;a++)e.push(a);for(var a=0;a<12;a++)f.push({fullName:b.DATETIME_FORMATS.MONTH[a],shortName:b.DATETIME_FORMATS.SHORTMONTH[a]});for(var a=0;a<7;a++){var c=b.DATETIME_FORMATS.DAY[(a+h)%7];g.push({fullName:c,firstLetter:c.substr(0,1)})}h=0},j=function(a,b){b>11?a++:b<0&&a--,b=(b+12)%12;var c=new Date(a,b,1),d=new Date(a,b+1,0),f=new Date(a,b,0),g=d.getDate(),i=f.getDate(),j=c.getDay(),k=(j-h+7)%7||7,l=e.slice(0,42-(k+g));return l.length>7&&(l=l.slice(0,l.length-7)),{year:a,month:b,days:e.slice(0,g),leadingDays:e.slice(-k-(31-i),i),trailingDays:l}},k=function(b,d,e,h){i();var k=e.dateFormat||"short";b.months=f,b.daysOfWeek=g,b.inputHour,b.inputMinute,b.dateOnly===!0&&(d[0].querySelector("#adp-time").style.display="none"),b.$applyAsync(function(){if(h.triggerEl=angular.element(d[0].triggerEl),e.ngModel){var f=""+h.triggerEl.scope().$eval(e.ngModel);if(f){f.match(/[0-9]{2}:/)||(f+=" 00:00:00"),f=f.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1"),f=f.replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2"),f=f.replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,""),f=f.replace(/\s*\(\)\s*/,""),f=f.replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,""),f+=a(f);var g=new Date(f);b.selectedDate=new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds())}}if(!b.selectedDate||isNaN(b.selectedDate.getTime())){var i=new Date,k=b.year||i.getFullYear(),l=b.month?b.month-1:i.getMonth(),m=b.day||i.getDate(),n=b.hour||i.getHours(),o=b.minute||i.getMinutes();b.selectedDate=new Date(k,l,m,n,o,0)}b.inputHour=b.selectedDate.getHours(),b.inputMinute=b.selectedDate.getMinutes(),b.mv=j(b.selectedDate.getFullYear(),b.selectedDate.getMonth()),b.today=c(new Date,"yyyy-M-d"),b.mv.year==b.selectedDate.getFullYear()&&b.mv.month==b.selectedDate.getMonth()?b.selectedDay=b.selectedDate.getDate():b.selectedDay=null}),b.addMonth=function(a){b.mv=j(b.mv.year,b.mv.month+a)},b.setDate=function(a){var c=angular.element(a.target)[0];c.className.indexOf("selectable")!==-1&&(b.updateNgModel(parseInt(c.innerHTML)),b.closeOnSelect!==!1&&h.closeDatetimePicker())},b.updateNgModel=function(a){if(a=a?a:b.selectedDate.getDate(),b.selectedDate=new Date(b.mv.year,b.mv.month,a,b.inputHour,b.inputMinute,0),b.selectedDay=b.selectedDate.getDate(),e.ngModel){var f,d=h.triggerEl.scope();f=d.$eval(e.ngModel)&&"Date"===d.$eval(e.ngModel).constructor.name?new Date(c(b.selectedDate,k)):c(b.selectedDate,k),d.$eval(e.ngModel+"= date",{date:f}),b.fieldId&&b.fieldId.length>0&&b.$emit("datetime-picker-changed",{id:b.fieldId,date:f})}},b.$on("$destroy",h.closeDatetimePicker)};return{restrict:"A",template:d,controller:"DatetimePickerCtrl",replace:!0,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"=",fieldId:"@?"},link:k}};e.$inject=["$locale","dateFilter"],angular.module("angularjs-datetime-picker").directive("datetimePickerPopup",e);var f=function(a,b){return{require:"ngModel",link:function(a,c,d,e){a.$watch(d.ngModel,function(a){if(a&&""!=a){var b=new Date(a);e.$setValidity("date",!!b);var c=new Date;d.hasOwnProperty("futureOnly")&&e.$setValidity("future-only",!(b<c))}}),c[0].addEventListener("click",function(){b.open({triggerEl:c[0],dateFormat:d.dateFormat,ngModel:d.ngModel,year:d.year,month:d.month,day:d.day,hour:d.hour,minute:d.minute,dateOnly:d.dateOnly,futureOnly:d.futureOnly,closeOnSelect:d.closeOnSelect,fieldId:d.fieldId})})}}};f.$inject=["$parse","DatetimePicker"],angular.module("angularjs-datetime-picker").directive("datetimePicker",f)}();